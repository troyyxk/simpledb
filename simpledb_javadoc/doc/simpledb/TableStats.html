<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Sat Nov 01 16:02:16 EDT 2014 -->
<title>TableStats</title>
<meta name="date" content="2014-11-01">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TableStats";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="TableStats.html#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="StringHistogram.html" title="class in simpledb"><span class="strong">Prev Class</span></a></li>
<li><a href="Transaction.html" title="class in simpledb"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html@simpledb%252FTableStats.html" target="_top">Frames</a></li>
<li><a href="TableStats.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="TableStats.html#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="TableStats.html#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="TableStats.html#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="TableStats.html#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="TableStats.html#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="TableStats.html#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">simpledb</div>
<h2 title="Class TableStats" class="title">Class TableStats</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>simpledb.TableStats</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">TableStats</span>
extends java.lang.Object</pre>
<div class="block">TableStats represents statistics (e.g., histograms) about base tables in a
 query. 
 
 This class is not needed in implementing lab1 and lab2.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#IOCOSTPERPAGE">IOCOSTPERPAGE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#NUM_HIST_BINS">NUM_HIST_BINS</a></strong></code>
<div class="block">Number of bins for the histogram.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.util.concurrent.ConcurrentHashMap&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#statsMap">statsMap</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="TableStats.html#TableStats(int, int)">TableStats</a></strong>(int&nbsp;tableid,
          int&nbsp;ioCostPerPage)</code>
<div class="block">Create a new TableStats object, that keeps track of statistics on each
 column of a table</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#avgSelectivity(int, simpledb.Predicate.Op)">avgSelectivity</a></strong>(int&nbsp;field,
              <a href="Predicate.Op.html" title="enum in simpledb">Predicate.Op</a>&nbsp;op)</code>
<div class="block">The average selectivity of the field under op.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#computeStatistics()">computeStatistics</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#estimateScanCost()">estimateScanCost</a></strong>()</code>
<div class="block">Estimates the cost of sequentially scanning the file, given that the cost
 to read a page is costPerPageIO.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#estimateSelectivity(int, simpledb.Predicate.Op, simpledb.Field)">estimateSelectivity</a></strong>(int&nbsp;field,
                   <a href="Predicate.Op.html" title="enum in simpledb">Predicate.Op</a>&nbsp;op,
                   <a href="Field.html" title="interface in simpledb">Field</a>&nbsp;constant)</code>
<div class="block">Estimate the selectivity of predicate <tt>field op constant</tt> on the
 table.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#estimateTableCardinality(double)">estimateTableCardinality</a></strong>(double&nbsp;selectivityFactor)</code>
<div class="block">This method returns the number of tuples in the relation, given that a
 predicate with selectivity selectivityFactor is applied.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#getStatsMap()">getStatsMap</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="TableStats.html" title="class in simpledb">TableStats</a></code></td>
<td class="colLast"><code><strong><a href="TableStats.html#getTableStats(java.lang.String)">getTableStats</a></strong>(java.lang.String&nbsp;tablename)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#setStatsMap(java.util.HashMap)">setStatsMap</a></strong>(java.util.HashMap&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;s)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#setTableStats(java.lang.String, simpledb.TableStats)">setTableStats</a></strong>(java.lang.String&nbsp;tablename,
             <a href="TableStats.html" title="class in simpledb">TableStats</a>&nbsp;stats)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="TableStats.html#totalTuples()">totalTuples</a></strong>()</code>
<div class="block">return the total number of tuples in this table</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="statsMap">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>statsMap</h4>
<pre>private static final&nbsp;java.util.concurrent.ConcurrentHashMap&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt; statsMap</pre>
</li>
</ul>
<a name="IOCOSTPERPAGE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IOCOSTPERPAGE</h4>
<pre>static final&nbsp;int IOCOSTPERPAGE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../constant-values.html#simpledb.TableStats.IOCOSTPERPAGE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="NUM_HIST_BINS">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NUM_HIST_BINS</h4>
<pre>static final&nbsp;int NUM_HIST_BINS</pre>
<div class="block">Number of bins for the histogram. Feel free to increase this value over
 100, though our tests assume that you have at least 100 bins in your
 histograms.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../constant-values.html#simpledb.TableStats.NUM_HIST_BINS">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TableStats(int, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TableStats</h4>
<pre>public&nbsp;TableStats(int&nbsp;tableid,
          int&nbsp;ioCostPerPage)</pre>
<div class="block">Create a new TableStats object, that keeps track of statistics on each
 column of a table</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tableid</code> - The table over which to compute statistics</dd><dd><code>ioCostPerPage</code> - The cost per page of IO. This doesn't differentiate between
            sequential-scan IO and disk seeks.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getTableStats(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTableStats</h4>
<pre>public static&nbsp;<a href="TableStats.html" title="class in simpledb">TableStats</a>&nbsp;getTableStats(java.lang.String&nbsp;tablename)</pre>
</li>
</ul>
<a name="setTableStats(java.lang.String, simpledb.TableStats)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTableStats</h4>
<pre>public static&nbsp;void&nbsp;setTableStats(java.lang.String&nbsp;tablename,
                 <a href="TableStats.html" title="class in simpledb">TableStats</a>&nbsp;stats)</pre>
</li>
</ul>
<a name="setStatsMap(java.util.HashMap)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStatsMap</h4>
<pre>public static&nbsp;void&nbsp;setStatsMap(java.util.HashMap&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;s)</pre>
</li>
</ul>
<a name="getStatsMap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStatsMap</h4>
<pre>public static&nbsp;java.util.Map&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;getStatsMap()</pre>
</li>
</ul>
<a name="computeStatistics()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeStatistics</h4>
<pre>public static&nbsp;void&nbsp;computeStatistics()</pre>
</li>
</ul>
<a name="estimateScanCost()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateScanCost</h4>
<pre>public&nbsp;double&nbsp;estimateScanCost()</pre>
<div class="block">Estimates the cost of sequentially scanning the file, given that the cost
 to read a page is costPerPageIO. You can assume that there are no seeks
 and that no pages are in the buffer pool.
 
 Also, assume that your hard drive can only read entire pages at once, so
 if the last page of the table only has one tuple on it, it's just as
 expensive to read as a full page. (Most real hard drives can't
 efficiently address regions smaller than a page at a time.)</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The estimated cost of scanning the table.</dd></dl>
</li>
</ul>
<a name="estimateTableCardinality(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateTableCardinality</h4>
<pre>public&nbsp;int&nbsp;estimateTableCardinality(double&nbsp;selectivityFactor)</pre>
<div class="block">This method returns the number of tuples in the relation, given that a
 predicate with selectivity selectivityFactor is applied.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>selectivityFactor</code> - The selectivity of any predicates over the table</dd>
<dt><span class="strong">Returns:</span></dt><dd>The estimated cardinality of the scan with the specified
         selectivityFactor</dd></dl>
</li>
</ul>
<a name="avgSelectivity(int, simpledb.Predicate.Op)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>avgSelectivity</h4>
<pre>public&nbsp;double&nbsp;avgSelectivity(int&nbsp;field,
                    <a href="Predicate.Op.html" title="enum in simpledb">Predicate.Op</a>&nbsp;op)</pre>
<div class="block">The average selectivity of the field under op.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>field</code> - the index of the field</dd><dd><code>op</code> - the operator in the predicate
 The semantic of the method is that, given the table, and then given a
 tuple, of which we do not know the value of the field, return the
 expected selectivity. You may estimate this value from the histograms.</dd></dl>
</li>
</ul>
<a name="estimateSelectivity(int, simpledb.Predicate.Op, simpledb.Field)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateSelectivity</h4>
<pre>public&nbsp;double&nbsp;estimateSelectivity(int&nbsp;field,
                         <a href="Predicate.Op.html" title="enum in simpledb">Predicate.Op</a>&nbsp;op,
                         <a href="Field.html" title="interface in simpledb">Field</a>&nbsp;constant)</pre>
<div class="block">Estimate the selectivity of predicate <tt>field op constant</tt> on the
 table.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>field</code> - The field over which the predicate ranges</dd><dd><code>op</code> - The logical operation in the predicate</dd><dd><code>constant</code> - The value against which the field is compared</dd>
<dt><span class="strong">Returns:</span></dt><dd>The estimated selectivity (fraction of tuples that satisfy) the
         predicate</dd></dl>
</li>
</ul>
<a name="totalTuples()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>totalTuples</h4>
<pre>public&nbsp;int&nbsp;totalTuples()</pre>
<div class="block">return the total number of tuples in this table</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="TableStats.html#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="StringHistogram.html" title="class in simpledb"><span class="strong">Prev Class</span></a></li>
<li><a href="Transaction.html" title="class in simpledb"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html@simpledb%252FTableStats.html" target="_top">Frames</a></li>
<li><a href="TableStats.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="TableStats.html#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="TableStats.html#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="TableStats.html#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="TableStats.html#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="TableStats.html#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="TableStats.html#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>