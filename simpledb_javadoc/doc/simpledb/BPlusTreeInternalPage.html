<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Sat Nov 01 16:02:15 EDT 2014 -->
<title>BPlusTreeInternalPage</title>
<meta name="date" content="2014-11-01">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BPlusTreeInternalPage";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="BPlusTreeInternalPage.html#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="BPlusTreeHeaderPage.html" title="class in simpledb"><span class="strong">Prev Class</span></a></li>
<li><a href="BPlusTreeInternalPageIterator.html" title="class in simpledb"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html@simpledb%252FBPlusTreeInternalPage.html" target="_top">Frames</a></li>
<li><a href="BPlusTreeInternalPage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">simpledb</div>
<h2 title="Class BPlusTreeInternalPage" class="title">Class BPlusTreeInternalPage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>simpledb.BPlusTreeInternalPage</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="Page.html" title="interface in simpledb">Page</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">BPlusTreeInternalPage</span>
extends java.lang.Object
implements <a href="Page.html" title="interface in simpledb">Page</a></pre>
<div class="block">Each instance of BPlusTreeInternalPage stores data for one page of a BPlusTreeFile and 
 implements the Page interface that is used by BufferPool.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="BPlusTreeFile.html" title="class in simpledb"><code>BPlusTreeFile</code></a>, 
<a href="BufferPool.html" title="class in simpledb"><code>BufferPool</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#childCategory">childCategory</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int[]</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#children">children</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="TransactionId.html" title="class in simpledb">TransactionId</a></code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#dirtier">dirtier</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#dirty">dirty</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) byte[]</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#header">header</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#INDEX_SIZE">INDEX_SIZE</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#keyField">keyField</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="Field.html" title="interface in simpledb">Field</a>[]</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#keys">keys</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#numSlots">numSlots</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) byte[]</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#oldData">oldData</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.Byte</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#oldDataLock">oldDataLock</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#parent">parent</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a></code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#pid">pid</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="TupleDesc.html" title="class in simpledb">TupleDesc</a></code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#td">td</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="BPlusTreeInternalPage.html#BPlusTreeInternalPage(simpledb.BPlusTreePageId, byte[], int)">BPlusTreeInternalPage</a></strong>(<a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a>&nbsp;id,
                     byte[]&nbsp;data,
                     int&nbsp;key)</code>
<div class="block">Create a BPlusTreeInternalPage from a set of bytes of data read from disk.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static byte[]</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#createEmptyPageData()">createEmptyPageData</a></strong>()</code>
<div class="block">Static method to generate a byte array corresponding to an empty
 BPlusTreeInternalPage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#deleteEntry(simpledb.BPlusTreeEntry)">deleteEntry</a></strong>(<a href="BPlusTreeEntry.html" title="class in simpledb">BPlusTreeEntry</a>&nbsp;e)</code>
<div class="block">Delete the specified entry (key + right child pointer) from the page; the entry 
 should be updated to reflect that it is no longer stored on any page.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#deleteEntry(simpledb.BPlusTreeEntry, boolean)">deleteEntry</a></strong>(<a href="BPlusTreeEntry.html" title="class in simpledb">BPlusTreeEntry</a>&nbsp;e,
           boolean&nbsp;deleteRightChild)</code>
<div class="block">Delete the specified entry (key + 1 child pointer) from the page; the entry 
 should be updated to reflect that it is no longer stored on any page.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="BPlusTreeInternalPage.html" title="class in simpledb">BPlusTreeInternalPage</a></code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#getBeforeImage()">getBeforeImage</a></strong>()</code>
<div class="block">Return a view of this page before it was modified
        -- used by recovery</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) <a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a></code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#getChildId(int)">getChildId</a></strong>(int&nbsp;i)</code>
<div class="block">protected method used by the iterator to get the ith child page id out of this page</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#getHeaderSize()">getHeaderSize</a></strong>()</code>
<div class="block">Computes the number of bytes in the header of a B+ internal page with each entry occupying entrySize bytes</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a></code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#getId()">getId</a></strong>()</code>
<div class="block">Return the id of this page.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="Field.html" title="interface in simpledb">Field</a></code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#getKey(int)">getKey</a></strong>(int&nbsp;i)</code>
<div class="block">protected method used by the iterator to get the ith key out of this page</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#getNumEmptySlots()">getNumEmptySlots</a></strong>()</code>
<div class="block">Returns the number of empty slots on this page.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#getNumEntries()">getNumEntries</a></strong>()</code>
<div class="block">Retrieve the number of entries on this page.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#getPageData()">getPageData</a></strong>()</code>
<div class="block">Generates a byte array representing the contents of this page.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a></code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#getParentId()">getParentId</a></strong>()</code>
<div class="block">Get the parent id of this page</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#insertEntry(simpledb.BPlusTreeEntry)">insertEntry</a></strong>(<a href="BPlusTreeEntry.html" title="class in simpledb">BPlusTreeEntry</a>&nbsp;e)</code>
<div class="block">Adds the specified entry to the page; the entry should be updated to reflect
  that it is now stored on this page.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="TransactionId.html" title="class in simpledb">TransactionId</a></code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#isDirty()">isDirty</a></strong>()</code>
<div class="block">Returns the tid of the transaction that last dirtied this page, or null if the page is not dirty</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#isSlotUsed(int)">isSlotUsed</a></strong>(int&nbsp;i)</code>
<div class="block">Returns true if associated slot on this page is filled.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Iterator&lt;<a href="BPlusTreeEntry.html" title="class in simpledb">BPlusTreeEntry</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#iterator()">iterator</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#markDirty(boolean, simpledb.TransactionId)">markDirty</a></strong>(boolean&nbsp;dirty,
         <a href="TransactionId.html" title="class in simpledb">TransactionId</a>&nbsp;tid)</code>
<div class="block">Marks this page as dirty/not dirty and record that transaction
 that did the dirtying</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#markSlotUsed(int, boolean)">markSlotUsed</a></strong>(int&nbsp;i,
            boolean&nbsp;value)</code>
<div class="block">Abstraction to fill or clear a slot on this page.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#moveEntry(int, int)">moveEntry</a></strong>(int&nbsp;from,
         int&nbsp;to)</code>
<div class="block">Move an entry from one slot to another slot, and update the corresponding
 headers</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#readNextChild(java.io.DataInputStream, int)">readNextChild</a></strong>(java.io.DataInputStream&nbsp;dis,
             int&nbsp;slotId)</code>
<div class="block">Suck up child pointers from the source file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="Field.html" title="interface in simpledb">Field</a></code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#readNextKey(java.io.DataInputStream, int)">readNextKey</a></strong>(java.io.DataInputStream&nbsp;dis,
           int&nbsp;slotId)</code>
<div class="block">Suck up keys from the source file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#setBeforeImage()">setBeforeImage</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="BPlusTreeInternalPage.html#setParentId(simpledb.BPlusTreePageId)">setParentId</a></strong>(<a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a>&nbsp;id)</code>
<div class="block">Set the parent id</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="dirty">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dirty</h4>
<pre>private volatile&nbsp;boolean dirty</pre>
</li>
</ul>
<a name="dirtier">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dirtier</h4>
<pre>private volatile&nbsp;<a href="TransactionId.html" title="class in simpledb">TransactionId</a> dirtier</pre>
</li>
</ul>
<a name="INDEX_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INDEX_SIZE</h4>
<pre>static final&nbsp;int INDEX_SIZE</pre>
</li>
</ul>
<a name="pid">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pid</h4>
<pre>final&nbsp;<a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a> pid</pre>
</li>
</ul>
<a name="td">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>td</h4>
<pre>final&nbsp;<a href="TupleDesc.html" title="class in simpledb">TupleDesc</a> td</pre>
</li>
</ul>
<a name="header">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>header</h4>
<pre>final&nbsp;byte[] header</pre>
</li>
</ul>
<a name="keys">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keys</h4>
<pre>final&nbsp;<a href="Field.html" title="interface in simpledb">Field</a>[] keys</pre>
</li>
</ul>
<a name="children">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>children</h4>
<pre>final&nbsp;int[] children</pre>
</li>
</ul>
<a name="numSlots">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numSlots</h4>
<pre>final&nbsp;int numSlots</pre>
</li>
</ul>
<a name="keyField">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keyField</h4>
<pre>final&nbsp;int keyField</pre>
</li>
</ul>
<a name="childCategory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>childCategory</h4>
<pre>private&nbsp;int childCategory</pre>
</li>
</ul>
<a name="parent">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parent</h4>
<pre>private&nbsp;int parent</pre>
</li>
</ul>
<a name="oldData">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>oldData</h4>
<pre>byte[] oldData</pre>
</li>
</ul>
<a name="oldDataLock">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>oldDataLock</h4>
<pre>private final&nbsp;java.lang.Byte oldDataLock</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BPlusTreeInternalPage(simpledb.BPlusTreePageId, byte[], int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BPlusTreeInternalPage</h4>
<pre>public&nbsp;BPlusTreeInternalPage(<a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a>&nbsp;id,
                     byte[]&nbsp;data,
                     int&nbsp;key)
                      throws java.io.IOException</pre>
<div class="block">Create a BPlusTreeInternalPage from a set of bytes of data read from disk.
 The format of a BPlusTreeInternalPage is a set of header bytes indicating
 the slots of the page that are in use, some number of entry slots, and extra
 bytes for the parent pointer, one extra child pointer (a node with m entries 
 has m+1 pointers to children), and the category of all child pages (either 
 leaf or internal).
  Specifically, the number of entries is equal to: <p>
          floor((BufferPool.getPageSize()*8 - extra bytes*8) / (entry size * 8 + 1))
 <p> where entry size is the size of entries in this index node
 (key + child pointer), which can be determined via the key field and 
 <a href="Catalog.html#getTupleDesc(int)"><code>Catalog.getTupleDesc(int)</code></a>.
 The number of 8-bit header words is equal to:
 <p>
      ceiling((no. entry slots + 1) / 8)
 <p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - - the id of this page</dd><dd><code>data</code> - - the raw data of this page</dd><dd><code>key</code> - - the field which the index is keyed on</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="Database.html#getCatalog()"><code>Database.getCatalog()</code></a>, 
<a href="Catalog.html#getTupleDesc(int)"><code>Catalog.getTupleDesc(int)</code></a>, 
<a href="BufferPool.html#getPageSize()"><code>BufferPool.getPageSize()</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getNumEntries()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumEntries</h4>
<pre>public&nbsp;int&nbsp;getNumEntries()</pre>
<div class="block">Retrieve the number of entries on this page. (The number of keys)</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the number of entries on this page</dd></dl>
</li>
</ul>
<a name="getHeaderSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeaderSize</h4>
<pre>private&nbsp;int&nbsp;getHeaderSize()</pre>
<div class="block">Computes the number of bytes in the header of a B+ internal page with each entry occupying entrySize bytes</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the number of bytes in the header</dd></dl>
</li>
</ul>
<a name="getBeforeImage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBeforeImage</h4>
<pre>public&nbsp;<a href="BPlusTreeInternalPage.html" title="class in simpledb">BPlusTreeInternalPage</a>&nbsp;getBeforeImage()</pre>
<div class="block">Return a view of this page before it was modified
        -- used by recovery</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="Page.html#getBeforeImage()">getBeforeImage</a></code>&nbsp;in interface&nbsp;<code><a href="Page.html" title="interface in simpledb">Page</a></code></dd>
</dl>
</li>
</ul>
<a name="setBeforeImage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBeforeImage</h4>
<pre>public&nbsp;void&nbsp;setBeforeImage()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="Page.html#setBeforeImage()">setBeforeImage</a></code>&nbsp;in interface&nbsp;<code><a href="Page.html" title="interface in simpledb">Page</a></code></dd>
</dl>
</li>
</ul>
<a name="getId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getId</h4>
<pre>public&nbsp;<a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a>&nbsp;getId()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="Page.html#getId()">Page</a></code></strong></div>
<div class="block">Return the id of this page.  The id is a unique identifier for a page
 that can be used to look up the page on disk or determine if the page
 is resident in the buffer pool.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="Page.html#getId()">getId</a></code>&nbsp;in interface&nbsp;<code><a href="Page.html" title="interface in simpledb">Page</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the PageId associated with this page.</dd></dl>
</li>
</ul>
<a name="readNextKey(java.io.DataInputStream, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readNextKey</h4>
<pre>private&nbsp;<a href="Field.html" title="interface in simpledb">Field</a>&nbsp;readNextKey(java.io.DataInputStream&nbsp;dis,
                int&nbsp;slotId)
                   throws java.util.NoSuchElementException</pre>
<div class="block">Suck up keys from the source file.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.util.NoSuchElementException</code></dd></dl>
</li>
</ul>
<a name="readNextChild(java.io.DataInputStream, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readNextChild</h4>
<pre>private&nbsp;int&nbsp;readNextChild(java.io.DataInputStream&nbsp;dis,
                int&nbsp;slotId)
                   throws java.util.NoSuchElementException</pre>
<div class="block">Suck up child pointers from the source file.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.util.NoSuchElementException</code></dd></dl>
</li>
</ul>
<a name="getPageData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPageData</h4>
<pre>public&nbsp;byte[]&nbsp;getPageData()</pre>
<div class="block">Generates a byte array representing the contents of this page.
 Used to serialize this page to disk.
 <p>
 The invariant here is that it should be possible to pass the byte
 array generated by getPageData to the BPlusTreeInternalPage constructor and
 have it produce an identical BPlusTreeInternalPage object.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="Page.html#getPageData()">getPageData</a></code>&nbsp;in interface&nbsp;<code><a href="Page.html" title="interface in simpledb">Page</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>A byte array correspond to the bytes of this page.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="BPlusTreeInternalPage.html#BPlusTreeInternalPage(simpledb.BPlusTreePageId, byte[], int)"><code>BPlusTreeInternalPage(simpledb.BPlusTreePageId, byte[], int)</code></a></dd></dl>
</li>
</ul>
<a name="createEmptyPageData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createEmptyPageData</h4>
<pre>public static&nbsp;byte[]&nbsp;createEmptyPageData()</pre>
<div class="block">Static method to generate a byte array corresponding to an empty
 BPlusTreeInternalPage.
 Used to add new, empty pages to the file. Passing the results of
 this method to the BPlusTreeInternalPage constructor will create a BPlusTreeInternalPage with
 no valid entries in it.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The returned ByteArray.</dd></dl>
</li>
</ul>
<a name="deleteEntry(simpledb.BPlusTreeEntry, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteEntry</h4>
<pre>public&nbsp;void&nbsp;deleteEntry(<a href="BPlusTreeEntry.html" title="class in simpledb">BPlusTreeEntry</a>&nbsp;e,
               boolean&nbsp;deleteRightChild)
                 throws <a href="DbException.html" title="class in simpledb">DbException</a></pre>
<div class="block">Delete the specified entry (key + 1 child pointer) from the page; the entry 
 should be updated to reflect that it is no longer stored on any page.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>e</code> - The entry to delete</dd><dd><code>deleteRightChild</code> - - if true, delete the right child. Otherwise
        delete the left child</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="DbException.html" title="class in simpledb">DbException</a></code> - if this entry is not on this page, or entry slot is
         already empty.</dd></dl>
</li>
</ul>
<a name="deleteEntry(simpledb.BPlusTreeEntry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteEntry</h4>
<pre>public&nbsp;void&nbsp;deleteEntry(<a href="BPlusTreeEntry.html" title="class in simpledb">BPlusTreeEntry</a>&nbsp;e)
                 throws <a href="DbException.html" title="class in simpledb">DbException</a></pre>
<div class="block">Delete the specified entry (key + right child pointer) from the page; the entry 
 should be updated to reflect that it is no longer stored on any page.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>e</code> - The entry to delete</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="DbException.html" title="class in simpledb">DbException</a></code> - if this entry is not on this page, or entry slot is
         already empty.</dd></dl>
</li>
</ul>
<a name="insertEntry(simpledb.BPlusTreeEntry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertEntry</h4>
<pre>public&nbsp;void&nbsp;insertEntry(<a href="BPlusTreeEntry.html" title="class in simpledb">BPlusTreeEntry</a>&nbsp;e)
                 throws <a href="DbException.html" title="class in simpledb">DbException</a></pre>
<div class="block">Adds the specified entry to the page; the entry should be updated to reflect
  that it is now stored on this page.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>e</code> - The entry to add.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="DbException.html" title="class in simpledb">DbException</a></code> - if the page is full (no empty slots) or key field type,
         table id, or child page category is a mismatch, or the entry is invalid</dd></dl>
</li>
</ul>
<a name="moveEntry(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveEntry</h4>
<pre>private&nbsp;void&nbsp;moveEntry(int&nbsp;from,
             int&nbsp;to)</pre>
<div class="block">Move an entry from one slot to another slot, and update the corresponding
 headers</div>
</li>
</ul>
<a name="getParentId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParentId</h4>
<pre>public&nbsp;<a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a>&nbsp;getParentId()</pre>
<div class="block">Get the parent id of this page</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the parent id</dd></dl>
</li>
</ul>
<a name="setParentId(simpledb.BPlusTreePageId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setParentId</h4>
<pre>public&nbsp;void&nbsp;setParentId(<a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a>&nbsp;id)
                 throws <a href="DbException.html" title="class in simpledb">DbException</a></pre>
<div class="block">Set the parent id</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - - the id of the parent of this page</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="DbException.html" title="class in simpledb">DbException</a></code> - if the id is not valid</dd></dl>
</li>
</ul>
<a name="markDirty(boolean, simpledb.TransactionId)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markDirty</h4>
<pre>public&nbsp;void&nbsp;markDirty(boolean&nbsp;dirty,
             <a href="TransactionId.html" title="class in simpledb">TransactionId</a>&nbsp;tid)</pre>
<div class="block">Marks this page as dirty/not dirty and record that transaction
 that did the dirtying</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="Page.html#markDirty(boolean, simpledb.TransactionId)">markDirty</a></code>&nbsp;in interface&nbsp;<code><a href="Page.html" title="interface in simpledb">Page</a></code></dd>
</dl>
</li>
</ul>
<a name="isDirty()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDirty</h4>
<pre>public&nbsp;<a href="TransactionId.html" title="class in simpledb">TransactionId</a>&nbsp;isDirty()</pre>
<div class="block">Returns the tid of the transaction that last dirtied this page, or null if the page is not dirty</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="Page.html#isDirty()">isDirty</a></code>&nbsp;in interface&nbsp;<code><a href="Page.html" title="interface in simpledb">Page</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The id of the transaction that last dirtied this page, or null</dd></dl>
</li>
</ul>
<a name="getNumEmptySlots()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumEmptySlots</h4>
<pre>public&nbsp;int&nbsp;getNumEmptySlots()</pre>
<div class="block">Returns the number of empty slots on this page.</div>
</li>
</ul>
<a name="isSlotUsed(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSlotUsed</h4>
<pre>public&nbsp;boolean&nbsp;isSlotUsed(int&nbsp;i)</pre>
<div class="block">Returns true if associated slot on this page is filled.</div>
</li>
</ul>
<a name="markSlotUsed(int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markSlotUsed</h4>
<pre>private&nbsp;void&nbsp;markSlotUsed(int&nbsp;i,
                boolean&nbsp;value)</pre>
<div class="block">Abstraction to fill or clear a slot on this page.</div>
</li>
</ul>
<a name="iterator()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>iterator</h4>
<pre>public&nbsp;java.util.Iterator&lt;<a href="BPlusTreeEntry.html" title="class in simpledb">BPlusTreeEntry</a>&gt;&nbsp;iterator()</pre>
<dl><dt><span class="strong">Returns:</span></dt><dd>an iterator over all entries on this page (calling remove on this iterator throws an UnsupportedOperationException)
 (note that this iterator shouldn't return entries in empty slots!)</dd></dl>
</li>
</ul>
<a name="getKey(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKey</h4>
<pre><a href="Field.html" title="interface in simpledb">Field</a>&nbsp;getKey(int&nbsp;i)
       throws java.util.NoSuchElementException</pre>
<div class="block">protected method used by the iterator to get the ith key out of this page</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>i</code> - - the index of the key</dd>
<dt><span class="strong">Returns:</span></dt><dd>the ith key</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.util.NoSuchElementException</code></dd></dl>
</li>
</ul>
<a name="getChildId(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getChildId</h4>
<pre><a href="BPlusTreePageId.html" title="class in simpledb">BPlusTreePageId</a>&nbsp;getChildId(int&nbsp;i)
                     throws java.util.NoSuchElementException</pre>
<div class="block">protected method used by the iterator to get the ith child page id out of this page</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>i</code> - - the index of the child page id</dd>
<dt><span class="strong">Returns:</span></dt><dd>the ith child page id</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.util.NoSuchElementException</code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="BPlusTreeInternalPage.html#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="BPlusTreeHeaderPage.html" title="class in simpledb"><span class="strong">Prev Class</span></a></li>
<li><a href="BPlusTreeInternalPageIterator.html" title="class in simpledb"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html@simpledb%252FBPlusTreeInternalPage.html" target="_top">Frames</a></li>
<li><a href="BPlusTreeInternalPage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="BPlusTreeInternalPage.html#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>