<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Sat Nov 01 16:02:15 EDT 2014 -->
<title>JoinOptimizer</title>
<meta name="date" content="2014-11-01">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="JoinOptimizer";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="JoinOptimizer.html#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="Join.html" title="class in simpledb"><span class="strong">Prev Class</span></a></li>
<li><a href="JoinPredicate.html" title="class in simpledb"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html@simpledb%252FJoinOptimizer.html" target="_top">Frames</a></li>
<li><a href="JoinOptimizer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="JoinOptimizer.html#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="JoinOptimizer.html#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="JoinOptimizer.html#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="JoinOptimizer.html#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="JoinOptimizer.html#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="JoinOptimizer.html#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">simpledb</div>
<h2 title="Class JoinOptimizer" class="title">Class JoinOptimizer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>simpledb.JoinOptimizer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">JoinOptimizer</span>
extends java.lang.Object</pre>
<div class="block">The JoinOptimizer class is responsible for ordering a series of joins
 optimally, and for selecting the best instantiation of a join for a given
 logical plan.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#joins">joins</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="LogicalPlan.html" title="class in simpledb">LogicalPlan</a></code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#p">p</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="JoinOptimizer.html#JoinOptimizer(simpledb.LogicalPlan, java.util.Vector)">JoinOptimizer</a></strong>(<a href="LogicalPlan.html" title="class in simpledb">LogicalPlan</a>&nbsp;p,
             java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;joins)</code>
<div class="block">Constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="CostCard.html" title="class in simpledb">CostCard</a></code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#computeCostAndCardOfSubplan(java.util.HashMap, java.util.HashMap, simpledb.LogicalJoinNode, java.util.Set, double, simpledb.PlanCache)">computeCostAndCardOfSubplan</a></strong>(java.util.HashMap&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;stats,
                           java.util.HashMap&lt;java.lang.String,java.lang.Double&gt;&nbsp;filterSelectivities,
                           <a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&nbsp;joinToRemove,
                           java.util.Set&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;joinSet,
                           double&nbsp;bestCostSoFar,
                           <a href="PlanCache.html" title="class in simpledb">PlanCache</a>&nbsp;pc)</code>
<div class="block">This is a helper method that computes the cost and cardinality of joining
 joinToRemove to joinSet (joinSet should contain joinToRemove), given that
 all of the subsets of size joinSet.size() - 1 have already been computed
 and stored in PlanCache pc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#doesJoin(java.util.Vector, java.lang.String)">doesJoin</a></strong>(java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;joinlist,
        java.lang.String&nbsp;table)</code>
<div class="block">Return true if the specified table is in the list of joins, false
 otherwise</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;java.util.Set&lt;java.util.Set&lt;T&gt;&gt;</code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#enumerateSubsets(java.util.Vector, int)">enumerateSubsets</a></strong>(java.util.Vector&lt;T&gt;&nbsp;v,
                int&nbsp;size)</code>
<div class="block">Helper method to enumerate all of the subsets of a given size of a
 specified vector.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#estimateJoinCardinality(simpledb.LogicalJoinNode, int, int, boolean, boolean, java.util.Map)">estimateJoinCardinality</a></strong>(<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&nbsp;j,
                       int&nbsp;card1,
                       int&nbsp;card2,
                       boolean&nbsp;t1pkey,
                       boolean&nbsp;t2pkey,
                       java.util.Map&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;stats)</code>
<div class="block">Estimate the cardinality of a join.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#estimateJoinCost(simpledb.LogicalJoinNode, int, int, double, double)">estimateJoinCost</a></strong>(<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&nbsp;j,
                int&nbsp;card1,
                int&nbsp;card2,
                double&nbsp;cost1,
                double&nbsp;cost2)</code>
<div class="block">Estimate the cost of a join.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#estimateTableJoinCardinality(simpledb.Predicate.Op, java.lang.String, java.lang.String, java.lang.String, java.lang.String, int, int, boolean, boolean, java.util.Map, java.util.Map)">estimateTableJoinCardinality</a></strong>(<a href="Predicate.Op.html" title="enum in simpledb">Predicate.Op</a>&nbsp;joinOp,
                            java.lang.String&nbsp;table1Alias,
                            java.lang.String&nbsp;table2Alias,
                            java.lang.String&nbsp;field1PureName,
                            java.lang.String&nbsp;field2PureName,
                            int&nbsp;card1,
                            int&nbsp;card2,
                            boolean&nbsp;t1pkey,
                            boolean&nbsp;t2pkey,
                            java.util.Map&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;stats,
                            java.util.Map&lt;java.lang.String,java.lang.Integer&gt;&nbsp;tableAliasToId)</code>
<div class="block">Estimate the join cardinality of two tables.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#hasPkey(java.util.Vector)">hasPkey</a></strong>(java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;joinlist)</code>
<div class="block">Return true if a primary key field is joined by one of the joins in
 joinlist</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="DbIterator.html" title="interface in simpledb">DbIterator</a></code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#instantiateJoin(simpledb.LogicalJoinNode, simpledb.DbIterator, simpledb.DbIterator)">instantiateJoin</a></strong>(<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&nbsp;lj,
               <a href="DbIterator.html" title="interface in simpledb">DbIterator</a>&nbsp;plan1,
               <a href="DbIterator.html" title="interface in simpledb">DbIterator</a>&nbsp;plan2)</code>
<div class="block">Return best iterator for computing a given logical join, given the
 specified statistics, and the provided left and right subplans.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#isPkey(java.lang.String, java.lang.String)">isPkey</a></strong>(java.lang.String&nbsp;tableAlias,
      java.lang.String&nbsp;field)</code>
<div class="block">Return true if field is a primary key of the specified table, false
 otherwise</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#orderJoins(java.util.HashMap, java.util.HashMap, boolean)">orderJoins</a></strong>(java.util.HashMap&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;stats,
          java.util.HashMap&lt;java.lang.String,java.lang.Double&gt;&nbsp;filterSelectivities,
          boolean&nbsp;explain)</code>
<div class="block">Compute a logical, reasonably efficient join on the specified tables.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="JoinOptimizer.html#printJoins(java.util.Vector, simpledb.PlanCache, java.util.HashMap, java.util.HashMap)">printJoins</a></strong>(java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;js,
          <a href="PlanCache.html" title="class in simpledb">PlanCache</a>&nbsp;pc,
          java.util.HashMap&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;stats,
          java.util.HashMap&lt;java.lang.String,java.lang.Double&gt;&nbsp;selectivities)</code>
<div class="block">Helper function to display a Swing window with a tree representation of
 the specified list of joins.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="p">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>p</h4>
<pre><a href="LogicalPlan.html" title="class in simpledb">LogicalPlan</a> p</pre>
</li>
</ul>
<a name="joins">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>joins</h4>
<pre>java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt; joins</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="JoinOptimizer(simpledb.LogicalPlan, java.util.Vector)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>JoinOptimizer</h4>
<pre>public&nbsp;JoinOptimizer(<a href="LogicalPlan.html" title="class in simpledb">LogicalPlan</a>&nbsp;p,
             java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;joins)</pre>
<div class="block">Constructor</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>p</code> - the logical plan being optimized</dd><dd><code>joins</code> - the list of joins being performed</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="instantiateJoin(simpledb.LogicalJoinNode, simpledb.DbIterator, simpledb.DbIterator)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>instantiateJoin</h4>
<pre>public static&nbsp;<a href="DbIterator.html" title="interface in simpledb">DbIterator</a>&nbsp;instantiateJoin(<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&nbsp;lj,
                         <a href="DbIterator.html" title="interface in simpledb">DbIterator</a>&nbsp;plan1,
                         <a href="DbIterator.html" title="interface in simpledb">DbIterator</a>&nbsp;plan2)
                                  throws <a href="ParsingException.html" title="class in simpledb">ParsingException</a></pre>
<div class="block">Return best iterator for computing a given logical join, given the
 specified statistics, and the provided left and right subplans. Note that
 there is insufficient information to determine which plan should be the
 inner/outer here -- because DbIterator's don't provide any cardinality
 estimates, and stats only has information about the base tables. For this
 reason, the plan1</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>lj</code> - The join being considered</dd><dd><code>plan1</code> - The left join node's child</dd><dd><code>plan2</code> - The right join node's child</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="ParsingException.html" title="class in simpledb">ParsingException</a></code></dd></dl>
</li>
</ul>
<a name="estimateJoinCost(simpledb.LogicalJoinNode, int, int, double, double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateJoinCost</h4>
<pre>public&nbsp;double&nbsp;estimateJoinCost(<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&nbsp;j,
                      int&nbsp;card1,
                      int&nbsp;card2,
                      double&nbsp;cost1,
                      double&nbsp;cost2)</pre>
<div class="block">Estimate the cost of a join.
 
 The cost of the join should be calculated based on the join algorithm (or
 algorithms) that you implemented for Lab 2. It should be a function of
 the amount of data that must be read over the course of the query, as
 well as the number of CPU opertions performed by your join. Assume that
 the cost of a single predicate application is roughly 1.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>j</code> - A LogicalJoinNode representing the join operation being
            performed.</dd><dd><code>card1</code> - Estimated cardinality of the left-hand side of the query</dd><dd><code>card2</code> - Estimated cardinality of the right-hand side of the query</dd><dd><code>cost1</code> - Estimated cost of one full scan of the table on the left-hand
            side of the query</dd><dd><code>cost2</code> - Estimated cost of one full scan of the table on the right-hand
            side of the query</dd>
<dt><span class="strong">Returns:</span></dt><dd>An estimate of the cost of this query, in terms of cost1 and
         cost2</dd></dl>
</li>
</ul>
<a name="estimateJoinCardinality(simpledb.LogicalJoinNode, int, int, boolean, boolean, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateJoinCardinality</h4>
<pre>public&nbsp;int&nbsp;estimateJoinCardinality(<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&nbsp;j,
                          int&nbsp;card1,
                          int&nbsp;card2,
                          boolean&nbsp;t1pkey,
                          boolean&nbsp;t2pkey,
                          java.util.Map&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;stats)</pre>
<div class="block">Estimate the cardinality of a join. The cardinality of a join is the
 number of tuples produced by the join.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>j</code> - A LogicalJoinNode representing the join operation being
            performed.</dd><dd><code>card1</code> - Cardinality of the left-hand table in the join</dd><dd><code>card2</code> - Cardinality of the right-hand table in the join</dd><dd><code>t1pkey</code> - Is the left-hand table a primary-key table?</dd><dd><code>t2pkey</code> - Is the right-hand table a primary-key table?</dd><dd><code>stats</code> - The table stats, referenced by table names, not alias</dd>
<dt><span class="strong">Returns:</span></dt><dd>The cardinality of the join</dd></dl>
</li>
</ul>
<a name="estimateTableJoinCardinality(simpledb.Predicate.Op, java.lang.String, java.lang.String, java.lang.String, java.lang.String, int, int, boolean, boolean, java.util.Map, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateTableJoinCardinality</h4>
<pre>public static&nbsp;int&nbsp;estimateTableJoinCardinality(<a href="Predicate.Op.html" title="enum in simpledb">Predicate.Op</a>&nbsp;joinOp,
                               java.lang.String&nbsp;table1Alias,
                               java.lang.String&nbsp;table2Alias,
                               java.lang.String&nbsp;field1PureName,
                               java.lang.String&nbsp;field2PureName,
                               int&nbsp;card1,
                               int&nbsp;card2,
                               boolean&nbsp;t1pkey,
                               boolean&nbsp;t2pkey,
                               java.util.Map&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;stats,
                               java.util.Map&lt;java.lang.String,java.lang.Integer&gt;&nbsp;tableAliasToId)</pre>
<div class="block">Estimate the join cardinality of two tables.</div>
</li>
</ul>
<a name="enumerateSubsets(java.util.Vector, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enumerateSubsets</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;java.util.Set&lt;java.util.Set&lt;T&gt;&gt;&nbsp;enumerateSubsets(java.util.Vector&lt;T&gt;&nbsp;v,
                                                   int&nbsp;size)</pre>
<div class="block">Helper method to enumerate all of the subsets of a given size of a
 specified vector.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>v</code> - The vector whose subsets are desired</dd><dd><code>size</code> - The size of the subsets of interest</dd>
<dt><span class="strong">Returns:</span></dt><dd>a set of all subsets of the specified size</dd></dl>
</li>
</ul>
<a name="orderJoins(java.util.HashMap, java.util.HashMap, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>orderJoins</h4>
<pre>public&nbsp;java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;orderJoins(java.util.HashMap&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;stats,
                                           java.util.HashMap&lt;java.lang.String,java.lang.Double&gt;&nbsp;filterSelectivities,
                                           boolean&nbsp;explain)
                                             throws <a href="ParsingException.html" title="class in simpledb">ParsingException</a></pre>
<div class="block">Compute a logical, reasonably efficient join on the specified tables. See
 PS4 for hints on how this should be implemented.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>stats</code> - Statistics for each table involved in the join, referenced by
            base table names, not alias</dd><dd><code>filterSelectivities</code> - Selectivities of the filter predicates on each table in the
            join, referenced by table alias (if no alias, the base table
            name)</dd><dd><code>explain</code> - Indicates whether your code should explain its query plan or
            simply execute it</dd>
<dt><span class="strong">Returns:</span></dt><dd>A Vector<LogicalJoinNode> that stores joins in the left-deep
         order in which they should be executed.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="ParsingException.html" title="class in simpledb">ParsingException</a></code> - when stats or filter selectivities is missing a table in the
             join, or or when another internal error occurs</dd></dl>
</li>
</ul>
<a name="computeCostAndCardOfSubplan(java.util.HashMap, java.util.HashMap, simpledb.LogicalJoinNode, java.util.Set, double, simpledb.PlanCache)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeCostAndCardOfSubplan</h4>
<pre>private&nbsp;<a href="CostCard.html" title="class in simpledb">CostCard</a>&nbsp;computeCostAndCardOfSubplan(java.util.HashMap&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;stats,
                                   java.util.HashMap&lt;java.lang.String,java.lang.Double&gt;&nbsp;filterSelectivities,
                                   <a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&nbsp;joinToRemove,
                                   java.util.Set&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;joinSet,
                                   double&nbsp;bestCostSoFar,
                                   <a href="PlanCache.html" title="class in simpledb">PlanCache</a>&nbsp;pc)
                                      throws <a href="ParsingException.html" title="class in simpledb">ParsingException</a></pre>
<div class="block">This is a helper method that computes the cost and cardinality of joining
 joinToRemove to joinSet (joinSet should contain joinToRemove), given that
 all of the subsets of size joinSet.size() - 1 have already been computed
 and stored in PlanCache pc.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>stats</code> - table stats for all of the tables, referenced by table names
            rather than alias (see <a href="JoinOptimizer.html#orderJoins(java.util.HashMap, java.util.HashMap, boolean)"><code>orderJoins(java.util.HashMap&lt;java.lang.String, simpledb.TableStats&gt;, java.util.HashMap&lt;java.lang.String, java.lang.Double&gt;, boolean)</code></a>)</dd><dd><code>filterSelectivities</code> - the selectivities of the filters over each of the tables
            (where tables are indentified by their alias or name if no
            alias is given)</dd><dd><code>joinToRemove</code> - the join to remove from joinSet</dd><dd><code>joinSet</code> - the set of joins being considered</dd><dd><code>bestCostSoFar</code> - the best way to join joinSet so far (minimum of previous
            invocations of computeCostAndCardOfSubplan for this joinSet,
            from returned CostCard)</dd><dd><code>pc</code> - the PlanCache for this join; should have subplans for all
            plans of size joinSet.size()-1</dd>
<dt><span class="strong">Returns:</span></dt><dd>A <a href="CostCard.html" title="class in simpledb"><code>CostCard</code></a> objects desribing the cost, cardinality,
         optimal subplan</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="ParsingException.html" title="class in simpledb">ParsingException</a></code> - when stats, filterSelectivities, or pc object is missing
             tables involved in join</dd></dl>
</li>
</ul>
<a name="doesJoin(java.util.Vector, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doesJoin</h4>
<pre>private&nbsp;boolean&nbsp;doesJoin(java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;joinlist,
               java.lang.String&nbsp;table)</pre>
<div class="block">Return true if the specified table is in the list of joins, false
 otherwise</div>
</li>
</ul>
<a name="isPkey(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isPkey</h4>
<pre>private&nbsp;boolean&nbsp;isPkey(java.lang.String&nbsp;tableAlias,
             java.lang.String&nbsp;field)</pre>
<div class="block">Return true if field is a primary key of the specified table, false
 otherwise</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tableAlias</code> - The alias of the table in the query</dd><dd><code>field</code> - The pure name of the field</dd></dl>
</li>
</ul>
<a name="hasPkey(java.util.Vector)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasPkey</h4>
<pre>private&nbsp;boolean&nbsp;hasPkey(java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;joinlist)</pre>
<div class="block">Return true if a primary key field is joined by one of the joins in
 joinlist</div>
</li>
</ul>
<a name="printJoins(java.util.Vector, simpledb.PlanCache, java.util.HashMap, java.util.HashMap)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>printJoins</h4>
<pre>private&nbsp;void&nbsp;printJoins(java.util.Vector&lt;<a href="LogicalJoinNode.html" title="class in simpledb">LogicalJoinNode</a>&gt;&nbsp;js,
              <a href="PlanCache.html" title="class in simpledb">PlanCache</a>&nbsp;pc,
              java.util.HashMap&lt;java.lang.String,<a href="TableStats.html" title="class in simpledb">TableStats</a>&gt;&nbsp;stats,
              java.util.HashMap&lt;java.lang.String,java.lang.Double&gt;&nbsp;selectivities)</pre>
<div class="block">Helper function to display a Swing window with a tree representation of
 the specified list of joins. See <a href="JoinOptimizer.html#orderJoins(java.util.HashMap, java.util.HashMap, boolean)"><code>orderJoins(java.util.HashMap&lt;java.lang.String, simpledb.TableStats&gt;, java.util.HashMap&lt;java.lang.String, java.lang.Double&gt;, boolean)</code></a>, which may want to
 call this when the analyze flag is true.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>js</code> - the join plan to visualize</dd><dd><code>pc</code> - the PlanCache accumulated whild building the optimal plan</dd><dd><code>stats</code> - table statistics for base tables</dd><dd><code>selectivities</code> - the selectivities of the filters over each of the tables
            (where tables are indentified by their alias or name if no
            alias is given)</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="JoinOptimizer.html#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="Join.html" title="class in simpledb"><span class="strong">Prev Class</span></a></li>
<li><a href="JoinPredicate.html" title="class in simpledb"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html@simpledb%252FJoinOptimizer.html" target="_top">Frames</a></li>
<li><a href="JoinOptimizer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="JoinOptimizer.html#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="JoinOptimizer.html#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="JoinOptimizer.html#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="JoinOptimizer.html#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="JoinOptimizer.html#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="JoinOptimizer.html#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>